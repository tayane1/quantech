<form [formGroup]="form" (ngSubmit)="onSubmit()" class="employee-form">
  <div class="form-row">
    <div class="form-group">
      <label for="first_name">Prénom *</label>
      <input
        type="text"
        id="first_name"
        formControlName="first_name"
        [class.invalid]="isFieldInvalid('first_name')"
        placeholder="Prénom"
      />
      <span class="error-message" *ngIf="isFieldInvalid('first_name')">
        {{ getFieldError('first_name') }}
      </span>
    </div>

    <div class="form-group">
      <label for="last_name">Nom *</label>
      <input
        type="text"
        id="last_name"
        formControlName="last_name"
        [class.invalid]="isFieldInvalid('last_name')"
        placeholder="Nom"
      />
      <span class="error-message" *ngIf="isFieldInvalid('last_name')">
        {{ getFieldError('last_name') }}
      </span>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="email">Email *</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        [class.invalid]="isFieldInvalid('email')"
        placeholder="email@example.com"
      />
      <span class="error-message" *ngIf="isFieldInvalid('email')">
        {{ getFieldError('email') }}
      </span>
    </div>

    <div class="form-group">
      <label for="phone">Téléphone *</label>
      <input
        type="tel"
        id="phone"
        formControlName="phone"
        [class.invalid]="isFieldInvalid('phone')"
        placeholder="+33 6 12 34 56 78"
      />
      <span class="error-message" *ngIf="isFieldInvalid('phone')">
        {{ getFieldError('phone') }}
      </span>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="date_of_birth">Date de naissance *</label>
      <input
        type="date"
        id="date_of_birth"
        formControlName="date_of_birth"
        [class.invalid]="isFieldInvalid('date_of_birth')"
      />
      <span class="error-message" *ngIf="isFieldInvalid('date_of_birth')">
        {{ getFieldError('date_of_birth') }}
      </span>
    </div>

    <div class="form-group">
      <label for="gender">Genre *</label>
      <select
        id="gender"
        formControlName="gender"
        [class.invalid]="isFieldInvalid('gender')"
      >
        <option *ngFor="let option of genderOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
      <span class="error-message" *ngIf="isFieldInvalid('gender')">
        {{ getFieldError('gender') }}
      </span>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="hire_date">Date d'embauche *</label>
      <input
        type="date"
        id="hire_date"
        formControlName="hire_date"
        [class.invalid]="isFieldInvalid('hire_date')"
      />
      <span class="error-message" *ngIf="isFieldInvalid('hire_date')">
        {{ getFieldError('hire_date') }}
      </span>
    </div>

    <div class="form-group">
      <label for="status">Statut *</label>
      <select
        id="status"
        formControlName="status"
        [class.invalid]="isFieldInvalid('status')"
      >
        <option *ngFor="let option of statusOptions" [value]="option.value">
          {{ option.label }}
        </option>
      </select>
      <span class="error-message" *ngIf="isFieldInvalid('status')">
        {{ getFieldError('status') }}
      </span>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="department">Département</label>
      <select
        id="department"
        formControlName="department"
      >
        <option [value]="null">Sélectionner un département</option>
        <option *ngFor="let dept of departments" [value]="dept.id">
          {{ dept.name }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="salary">Salaire (FCFA) *</label>
      <input
        type="number"
        id="salary"
        formControlName="salary"
        [class.invalid]="isFieldInvalid('salary')"
        placeholder="0"
        min="0"
        step="0.01"
      />
      <span class="error-message" *ngIf="isFieldInvalid('salary')">
        {{ getFieldError('salary') }}
      </span>
    </div>
  </div>

  <div class="form-group">
    <label for="address">Adresse *</label>
    <textarea
      id="address"
      formControlName="address"
      [class.invalid]="isFieldInvalid('address')"
      rows="2"
      placeholder="Adresse complète"
    ></textarea>
    <span class="error-message" *ngIf="isFieldInvalid('address')">
      {{ getFieldError('address') }}
    </span>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="city">Ville *</label>
      <input
        type="text"
        id="city"
        formControlName="city"
        [class.invalid]="isFieldInvalid('city')"
        placeholder="Ville"
      />
      <span class="error-message" *ngIf="isFieldInvalid('city')">
        {{ getFieldError('city') }}
      </span>
    </div>

    <div class="form-group">
      <label for="country">Pays *</label>
      <input
        type="text"
        id="country"
        formControlName="country"
        [class.invalid]="isFieldInvalid('country')"
        placeholder="Pays"
      />
      <span class="error-message" *ngIf="isFieldInvalid('country')">
        {{ getFieldError('country') }}
      </span>
    </div>
  </div>

  <div class="form-group">
    <label for="profile_picture">Photo de profil</label>
    <div class="file-upload">
      <input
        type="file"
        id="profile_picture"
        accept="image/*"
        (change)="onFileSelected($event)"
      />
      <div class="preview" *ngIf="profilePicturePreview">
        <img [src]="profilePicturePreview" alt="Preview" />
        <button type="button" class="remove-picture" (click)="profilePicturePreview = null; profilePictureFile = null">
          ×
        </button>
      </div>
    </div>
  </div>

  <div class="error-message" *ngIf="error">
    {{ error }}
  </div>

  <div class="form-actions">
    <app-button
      type="button"
      variant="outline"
      (clicked)="onCancel()"
      [disabled]="loading"
    >
      Annuler
    </app-button>
    <app-button
      type="submit"
      variant="primary"
      [loading]="loading"
      [disabled]="form.invalid"
    >
      {{ employee ? 'Enregistrer' : 'Créer' }}
    </app-button>
  </div>
</form>

