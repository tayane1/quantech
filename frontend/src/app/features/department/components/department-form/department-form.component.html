<form [formGroup]="form" (ngSubmit)="onSubmit()" class="department-form">
  <div class="form-group">
    <label for="name">Nom du département *</label>
    <input
      type="text"
      id="name"
      formControlName="name"
      [class.invalid]="isFieldInvalid('name')"
      placeholder="Ex: Ressources Humaines"
    />
    <span class="error-message" *ngIf="isFieldInvalid('name')">
      {{ getFieldError('name') }}
    </span>
  </div>

  <div class="form-group">
    <label for="code">Code *</label>
    <input
      type="text"
      id="code"
      formControlName="code"
      [class.invalid]="isFieldInvalid('code')"
      placeholder="Ex: RH"
      [attr.readonly]="department ? true : null"
    />
    <span class="error-message" *ngIf="isFieldInvalid('code')">
      {{ getFieldError('code') }}
    </span>
    <small class="help-text" *ngIf="!department">Le code ne peut pas être modifié après création</small>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <textarea
      id="description"
      formControlName="description"
      [class.invalid]="isFieldInvalid('description')"
      rows="4"
      placeholder="Description du département"
    ></textarea>
    <span class="error-message" *ngIf="isFieldInvalid('description')">
      {{ getFieldError('description') }}
    </span>
  </div>

  <div class="form-group">
    <label for="location">Localisation</label>
    <input
      type="text"
      id="location"
      formControlName="location"
      [class.invalid]="isFieldInvalid('location')"
      placeholder="Ex: Paris, France"
    />
    <span class="error-message" *ngIf="isFieldInvalid('location')">
      {{ getFieldError('location') }}
    </span>
  </div>

  <div class="form-group">
    <label for="budget">Budget (FCFA)</label>
    <input
      type="number"
      id="budget"
      formControlName="budget"
      [class.invalid]="isFieldInvalid('budget')"
      placeholder="0"
      min="0"
      step="0.01"
    />
    <span class="error-message" *ngIf="isFieldInvalid('budget')">
      {{ getFieldError('budget') }}
    </span>
  </div>

  <!-- TODO: Ajouter la sélection du manager une fois le service Employee créé -->

  <div class="error-message" *ngIf="error">
    {{ error }}
  </div>

  <div class="form-actions">
    <app-button
      type="button"
      variant="outline"
      (clicked)="onCancel()"
      [disabled]="loading"
    >
      Annuler
    </app-button>
    <app-button
      type="submit"
      variant="primary"
      [loading]="loading"
      [disabled]="form.invalid"
    >
      {{ department ? 'Enregistrer' : 'Créer' }}
    </app-button>
  </div>
</form>

